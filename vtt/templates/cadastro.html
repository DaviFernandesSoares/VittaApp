
{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cadastro - VittaApp</title>

  <!-- CSS -->
  <link rel="stylesheet" href="{% static 'css/cadastro.css' %}" />

  <!-- HTMX -->
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>
</head>
<body>

  <main class="page-container" style="min-height:100vh; display:flex; align-items:center; justify-content:center; padding:36px;">
    <section class="profile-card" style="max-width:920px; width:100%; grid-template-columns:1fr 320px;">
      <!-- Form column -->
      <div class="profile-main">
        <div style="display:flex; align-items:center; gap:14px; margin-bottom:8px;">
          <div style="width:56px; height:56px; border-radius:12px; background: linear-gradient(135deg,var(--primary),var(--accent)); display:flex; align-items:center; justify-content:center; color:#fff; font-weight:800; font-size:20px; box-shadow: var(--shadow-md);">
            VA
          </div>
          <div>
            <h2 id="cadastro-title">Crie sua conta na VittaApp</h2>
            <p class="sub">Acesse serviços de saúde, agendamentos e ofertas personalizadas.</p>
          </div>
        </div>

        <form id="cadastroForm"
              hx-post="{% url 'cadastro' %}"
              hx-target="#mensagem"
              hx-swap="innerHTML"
              novalidate
              aria-labelledby="cadastro-title"
              style="margin-top:18px;">

          {% csrf_token %}

          <div class="meta-row" style="margin-bottom:6px;">
            <div style="flex:1; min-width:200px;">
              <label for="username" class="badge-area">Nome completo</label>
              <input type="text" id="username" name="username" required placeholder="Seu nome completo" />
            </div>

            <div style="flex:1; min-width:200px;">
              <label for="email" class="badge-area">E‑mail</label>
              <input type="email" id="email" name="email" required placeholder="nome@exemplo.com" />
            </div>
          </div>

          <div style="margin-top:12px;">
            <label for="password" class="badge-area">Senha</label>
            <input type="password" id="password" name="password" required minlength="6" placeholder="Mínimo 6 caracteres" />
          </div>

          <div style="display:flex; gap:12px; margin-top:18px; align-items:center;">
            <button type="submit" class="book-btn" style="flex:1; padding:12px 16px; font-size:15px;">Criar conta</button>
            <button type="button" onclick="document.getElementById('cadastroForm').reset()" style="background:#fff; border:1px solid #e6e8ee; color:var(--primary); padding:10px 14px; border-radius:8px; font-weight:700;">Limpar</button>
          </div>

          <div id="mensagem" class="empty" style="margin-top:14px; display:none;"></div>

          <p style="margin-top:14px; color:var(--muted); font-size:14px;">
            Ao criar a conta, você concorda com nossos termos. Já tem conta? <a href="{% url 'login' %}">Entrar</a>
          </p>
        </form>

        <p style="margin-top:16px; color:#9aa0ad; font-size:13px;">Seus dados estão seguros com a VittaApp.</p>
      </div>

      <!-- Aside column -->
      <aside class="profile-aside">
        <div class="section-title alt">Vantagens VittaApp</div>

        <ul style="margin:8px 0 0 0; padding-left:18px; color:#444; line-height:1.6;">
          <li><strong>Agendamento rápido</strong> de consultas e vacinas</li>
          <li><strong>Histórico</strong> de pedidos e prescrições</li>
          <li><strong>Descontos</strong> e ofertas exclusivas</li>
        </ul>

        <div class="gallery" aria-hidden="true" style="margin-top:18px;">
          <img src="{% static 'img/sample1.jpg' %}" alt="" />
          <img src="{% static 'img/sample2.jpg' %}" alt="" />
        </div>

        <div style="margin-top:12px;">
          <div class="chip active" style="display:inline-flex; align-items:center; gap:8px;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            Conta segura
          </div>
        </div>
      </aside>
    </section>
  </main>

  <script>
    // mostra a área de mensagem quando HTMX responde
    document.body.addEventListener('htmx:afterSwap', (e) => {
      if (e.detail && e.detail.target && e.detail.target.id === 'mensagem') {
        const msg = document.getElementById('mensagem');
        msg.style.display = 'block';
        msg.scrollIntoView({behavior:'smooth', block:'nearest'});
      }
    });

    // client-side validation
    document.getElementById('cadastroForm').addEventListener('submit', (ev) => {
      const pass = document.getElementById('password').value || '';
      if (pass.length < 6) {
        ev.preventDefault();
        const msg = document.getElementById('mensagem');
        msg.className = 'empty';
        msg.innerText = 'Senha deve ter pelo menos 6 caracteres.';
        msg.style.display = 'block';
        return;
      }
    });
  </script>
</body>
</html>

